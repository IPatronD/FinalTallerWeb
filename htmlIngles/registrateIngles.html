<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Colitas Felices :: Register</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;500;700&display=swap" rel="stylesheet" />
    <link rel="stylesheet" href="../css/base.css">
    <link rel="stylesheet" href="../css/styleAuth.css">
    <link rel="icon" href="../img/logo/Logo.png" type="image/png">
</head>

<body>

    <!-- Men√∫ de opciones -->
    <!-- Header -->
    <header>
        <nav>
            <div class="logo">
                <a href="../htmlIngles/indexIngles.html">
                    <img src="../img/logo/Logo.png" alt="Logo Colitas Felices">
                </a>
            </div>

            <!-- Bot√≥n hamburguesa (solo visible en m√≥vil) -->
            <button class="menu-hamburguesa" aria-label="Men√∫">
                <span class="barra-hamburguesa"></span>
                <span class="barra-hamburguesa"></span>
                <span class="barra-hamburguesa"></span>
            </button>

            <!-- Men√∫ normal (visible en desktop) -->
            <div class="menu">
                <a href="../html/registrate.html" aria-label="Switch to Spanish">üåê ESP</a>
                <a href="../htmlIngles/nosotrosIngles.html">About </a>
                <a href="../htmlIngles/adoptaIngles.html">Adopt</a>
                <a href="../htmlIngles/dudasIngles.html">Doubts</a>
                <a href="../htmlIngles/donaIngles.html">Donate</a>
                <a href="../htmlIngles/contactoIngles.html">Contact</a>

                <!-- Men√∫ de cuenta (se actualiza autom√°ticamente) -->
                <div class="submenu">
                    <a href="#" class="submenu-trigger">My Account <span class="submenu-icon">‚ñæ</span></a>
                    <div class="submenu-opciones">
                        <!-- Contenido din√°mico (se llena con auth-state.js) -->
                        <a href="../htmlIngles/iniciarSesionIngles.html">Login</a>
                        <a href="../htmlIngles/registrateIngles.html">Register</a>
                    </div>
                </div>
            </div>
        </nav>
    </header>

    <div class="auth-container">
        <h2>Register</h2>
        <form id="registroForm">
            <input type="text" id="nombre" name="nombre" placeholder="Full Name" required>
            <input type="tel" id="telefono" name="telefono" placeholder="Phone Number" pattern="[0-9]{9}" required>
            <input type="email" id="correo" name="correo" placeholder="Email" required>
            <div class="password-container">
                <input type="password" id="contrasena" name="password" placeholder="Password" minlength="6" required>
            </div>

            <div class="password-container">
                <input type="password" id="repetirContrasena" name="repassword" placeholder="Repeat Password"
                    minlength="6" required>
            </div>
            <button type="submit">Sign Up</button>
            <p id="registro-error" class="error"></p>
        </form>
        <p class="auth-link">Already have an account? <a href="./iniciarSesionIngles.html">Login here</a></p>
    </div>

    <!-- Footer -->
    <footer class="footer">
        <div class="footer-contenedor">
            <div class="footer-logo">
                <h2>Colitas<span>Felices</span></h2>
            </div>
            <div class="footer-links">
                <a href="../htmlIngles/contactoIngles.html">Contact</a>
                <a href="../htmlIngles/AvisoLegalIngles.html">Legal Notice</a>
                <a href="../htmlIngles/PoliticaPrivacidadIngles.html">Privacy Policy</a>
                <a href="../htmlIngles/PoliticaCookiesIngles.html">Cookie Policy</a>
                <a href="../htmlIngles/contactoIngles.html">Whistleblower Channel</a>
                <a href="../htmlIngles/mapaSitioWebIngles.html">Website Sitemap</a>
            </div>
            <div class="footer-social">
                <h3>Follow us</h3>
                <a href="https://www.instagram.com" target="_blank"><img
                        src="https://cdn-icons-png.flaticon.com/128/1384/1384031.png" alt="Instagram"></a>
                <a href="https://www.facebook.com" target="_blank"><img
                        src="https://cdn-icons-png.flaticon.com/24/2111/2111392.png" alt="Facebook"></a>
                <a href="https://www.youtube.com" target="_blank"><img
                        src="https://cdn-icons-png.flaticon.com/128/1077/1077046.png" alt="YouTube"></a>
                <a href="https://tiktok.com" target="_blank"><img
                        src="https://cdn-icons-png.flaticon.com/128/3046/3046125.png" alt="TikTok"></a>
            </div>
            <div class="footer-contact">
                <h3>Contact</h3>
                <p><strong>(044) 456-7890</strong></p>
                <p>123 Animal Love Street, Trujillo City</p>
                <p><a href="mailto:contacto@colitasFelices.org">contacto@colitasFelices.org</a></p>
            </div>
        </div>
        <div class="footer-bottom">
            <p>Website created by <strong>Ariana Fernandez, David Garc√≠a, Diego Cabanillas, and Paula Rodr√≠guez</strong>
            </p>
        </div>
    </footer>

    <script>
        // Funci√≥n para mostrar/ocultar contrase√±a
        document.querySelectorAll('.toggle-password').forEach(button => {
            button.addEventListener('click', function () {
                const targetId = this.getAttribute('data-target');
                const input = document.getElementById(targetId);
                const isHidden = input.getAttribute('type') === 'password';
                input.setAttribute('type', isHidden ? 'text' : 'password');

                this.querySelector('.icon-visible').style.display = isHidden ? 'none' : 'inline';
                this.querySelector('.icon-hidden').style.display = isHidden ? 'inline' : 'none';
            });
        });

        // Manejo del formulario de registro
        document.getElementById('registroForm').addEventListener('submit', function (e) {
            e.preventDefault();

            const errorElement = document.getElementById('registro-error');
            const submitBtn = this.querySelector('button[type="submit"]');

            // Obtener valores del formulario
            const nombre = document.getElementById('nombre').value.trim();
            const telefono = document.getElementById('telefono').value.trim();
            const correo = document.getElementById('correo').value.trim().toLowerCase();
            const contrasena = document.getElementById('contrasena').value;
            const repetirContrasena = document.getElementById('repetirContrasena').value;

            // Validaciones b√°sicas
            if (!nombre) {
                errorElement.textContent = "Name is required";
                return;
            }

            if (!/^\d{9}$/.test(telefono)) {
                errorElement.textContent = "Phone number must have 9 digits";
                return;
            }

            if (!correo.includes('@')) {
                errorElement.textContent = "Invalid email";
                return;
            }

            if (contrasena.length < 6) {
                errorElement.textContent = "The password must be at least 6 characters long.";
                return;
            }

            if (contrasena !== repetirContrasena) {
                errorElement.textContent = "Passwords do not match";
                return;
            }

            // Mostrar estado de carga
            submitBtn.disabled = true;
            submitBtn.innerHTML = '<span class="spinner"></span> Registering...';
            errorElement.textContent = '';

            // Simular registro (sin Firebase)
            setTimeout(() => {
                // Guardar datos en localStorage
                localStorage.setItem('userEmail', correo);
                localStorage.setItem('userName', nombre);
                localStorage.setItem('userPhone', telefono);
                localStorage.setItem('esUsuarioNuevo', 'true');

                // Redirecci√≥n a p√°gina de bienvenida para nuevos usuarios
                const isHtmlFolder = window.location.pathname.includes('/htmlIngles/');
                window.location.href = isHtmlFolder ? './bienvenidosPrimerIngles.html' : './htmlIngles/bienvenidosPrimerIngles.html';
            }, 1000); // Peque√±o delay para simular proceso
        });
    </script>

    <!-- 4. Script de control de sesi√≥n -->
    <script src="../main.js" defer></script>
    <script src="../js/auth-state-Ingles.js" defer></script>
</body>

</html>